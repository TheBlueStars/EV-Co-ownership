<!DOCTYPE html><html lang="vi"><head>
<meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Co-owner Register</title>
<link rel="stylesheet" href="assets/styles.css">
</head><body>
<div class="container">
  <div class="header">
    <div class="brand"><div class="logo"></div><div><strong>EV Co-owner</strong><div class="badge">Auth</div></div></div>
    <div class="nav"><a href="login.html" class="btn">Đăng nhập</a></div>
  </div>

  <div class="card" style="max-width:620px;margin:0 auto">
    <h3>Đăng ký Co-owner</h3>
    <form id="frm">
      <div class="grid">
        <div class="field" style="grid-column:span 6"><label>Họ tên</label><input id="name" required></div>
        <div class="field" style="grid-column:span 6"><label>Email</label><input id="email" type="email" required></div>
        <div class="field" style="grid-column:span 6"><label>Mật khẩu</label><input id="pass" type="password" minlength="6" required></div>
        <div class="field" style="grid-column:span 6"><label>Tỉ lệ sở hữu (%)</label><input id="ownership" type="number" min="1" max="100" required></div>
      </div>
      <div class="error" id="err"></div>
      <button class="btn" type="submit">Tạo tài khoản</button>
    </form>
  </div>
  <div class="toast"></div>
</div>
<script type="module">
  import { AuthAPI } from './assets/api.js';
  import { toast, $ } from './assets/ui.js';

  $('#frm').addEventListener('submit', async (e)=>{
    e.preventDefault();
    const payload = {
      name: $('#name').value.trim(),
      email: $('#email').value.trim(),
      password: $('#pass').value,
      ownershipPercent: Number($('#ownership').value)
    };
    if(!payload.name || !payload.email || !payload.password || !payload.ownershipPercent){
      $('#err').textContent='Vui lòng điền đầy đủ thông tin.'; return;
    }
    $('#err').textContent='';
    try{
      await AuthAPI.register(payload);
      toast('Đăng ký thành công. Mời đăng nhập.');
      setTimeout(()=> location.href='login.html', 800);
    }catch(err){}
  });
</script>
</body></html>
